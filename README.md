# üè¶ Sistema Banc√°rio Python - Vers√£o 3.0 (Classes)

[![Python](https://img.shields.io/badge/Python-3.13.2-blue.svg)](https://www.python.org/downloads/)
[![MyPy](https://img.shields.io/badge/mypy-checked-blue.svg)](http://mypy-lang.org/)
[![Tests](https://img.shields.io/badge/tests-84%20passed-green.svg)](https://pytest.org/)
[![Coverage](https://img.shields.io/badge/coverage-100%25-brightgreen.svg)](https://pytest-cov.readthedocs.io/)

> Sistema banc√°rio orientado a objetos desenvolvido em Python com heran√ßa, polimorfismo e classes abstratas.

## üÜï **Novidades da Vers√£o 3.0**

### **üèóÔ∏è Arquitetura Orientada a Objetos**

- ‚úÖ **Classes Abstratas**: Transacao como classe base abstrata
- ‚úÖ **Heran√ßa**: Cliente ‚Üí PessoaFisica, Conta ‚Üí ContaCorrente
- ‚úÖ **Polimorfismo**: Diferentes tipos de transa√ß√£o (Saque, Deposito)
- ‚úÖ **Encapsulamento**: Propriedades e m√©todos privados/protegidos
- ‚úÖ **Composi√ß√£o**: Cliente possui Contas, Conta possui Historico

### **üìä Diagrama de Classes UML Implementado**

```
Cliente (base)
‚îú‚îÄ‚îÄ endereco: str
‚îú‚îÄ‚îÄ contas: List[Conta]
‚îú‚îÄ‚îÄ realizar_transacao()
‚îî‚îÄ‚îÄ adicionar_conta()

PessoaFisica(Cliente)
‚îú‚îÄ‚îÄ nome: str
‚îú‚îÄ‚îÄ data_nascimento: str
‚îú‚îÄ‚îÄ cpf: str
‚îî‚îÄ‚îÄ get_cpf_formatado()

Conta (base)
‚îú‚îÄ‚îÄ _saldo_centavos: int
‚îú‚îÄ‚îÄ _numero: int
‚îú‚îÄ‚îÄ _agencia: str
‚îú‚îÄ‚îÄ _cliente: Cliente
‚îú‚îÄ‚îÄ _historico: Historico
‚îú‚îÄ‚îÄ sacar()
‚îú‚îÄ‚îÄ depositar()
‚îî‚îÄ‚îÄ nova_conta() @classmethod

ContaCorrente(Conta)
‚îú‚îÄ‚îÄ _limite_centavos: int
‚îú‚îÄ‚îÄ _limite_saques: int
‚îú‚îÄ‚îÄ _saques_realizados_hoje: int
‚îî‚îÄ‚îÄ sacar() @override

Historico
‚îú‚îÄ‚îÄ _transacoes: List[Transacao]
‚îú‚îÄ‚îÄ adicionar_transacao()
‚îú‚îÄ‚îÄ gerar_relatorio()
‚îî‚îÄ‚îÄ transacoes_do_dia()

Transacao (ABC)
‚îú‚îÄ‚îÄ valor: float @property @abstractmethod
‚îî‚îÄ‚îÄ registrar() @abstractmethod

Saque(Transacao)
‚îú‚îÄ‚îÄ _valor: float
‚îú‚îÄ‚îÄ data_hora: datetime
‚îî‚îÄ‚îÄ registrar()

Deposito(Transacao)
‚îú‚îÄ‚îÄ _valor: float
‚îú‚îÄ‚îÄ data_hora: datetime
‚îî‚îÄ‚îÄ registrar()
```

## üöÄ **Instala√ß√£o e Execu√ß√£o**

### **1. Clone e Configure**

```bash
git clone https://github.com/inacio-dev/santander-python-bank.git
cd santander-python-bank
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

### **2. Execute o Sistema**

```bash
python main.py
```

### **3. Verificar Instala√ß√£o**

```bash
# Verificar tipagem
mypy main.py conftest.py test_main.py

# Executar testes
pytest -v

# Verificar cobertura
pytest --cov=main --cov-report=html
```

## üéÆ **Interface Atualizada**

O sistema apresenta um menu moderno integrado com as classes:

```
üè¶ SISTEMA BANC√ÅRIO - VERS√ÉO 3.0 (CLASSES)
============================================================
1Ô∏è‚É£  Criar Usu√°rio
2Ô∏è‚É£  Criar Conta Corrente
3Ô∏è‚É£  Depositar
4Ô∏è‚É£  Sacar
5Ô∏è‚É£  Visualizar Extrato
6Ô∏è‚É£  Listar Usu√°rios
7Ô∏è‚É£  Listar Contas
8Ô∏è‚É£  Relat√≥rio de Transa√ß√µes
9Ô∏è‚É£  Sair
============================================================
```

## üîß **Principais Melhorias Implementadas**

### **üèóÔ∏è Padr√µes de Design Aplicados**

#### **1. Strategy Pattern (Transa√ß√µes)**

```python
# Classe abstrata define a interface
class Transacao(ABC):
    @abstractmethod
    def registrar(self, conta: Conta) -> None:
        pass

# Implementa√ß√µes concretas
class Saque(Transacao):
    def registrar(self, conta: Conta) -> None:
        conta.sacar(self.valor)

class Deposito(Transacao):
    def registrar(self, conta: Conta) -> None:
        conta.depositar(self.valor)
```

#### **2. Factory Method (Cria√ß√£o de Contas)**

```python
class Conta:
    @classmethod
    def nova_conta(cls, cliente: Cliente, numero: int) -> 'Conta':
        return cls(cliente, numero)

# Uso
conta = ContaCorrente.nova_conta(cliente, 123)
```

#### **3. Composition (Cliente e Contas)**

```python
class Cliente:
    def __init__(self, endereco: str):
        self.contas: List[Conta] = []  # Composi√ß√£o

    def realizar_transacao(self, conta: Conta, transacao: Transacao):
        transacao.registrar(conta)
```

### **üîí Controles de Neg√≥cio Aprimorados**

#### **1. Limite de Transa√ß√µes Di√°rias**

- ‚úÖ **10 transa√ß√µes m√°ximas por dia por cliente**
- ‚úÖ **Valida√ß√£o autom√°tica antes de cada opera√ß√£o**
- ‚úÖ **Reset autom√°tico a cada novo dia**

#### **2. Hist√≥rico Inteligente**

```python
class Historico:
    def gerar_relatorio(self, tipo_transacao: Optional[str] = None) -> str:
        # Filtra por tipo espec√≠fico ou mostra todas

    def transacoes_do_dia(self) -> List[Transacao]:
        # Retorna apenas transa√ß√µes do dia atual
```

#### **3. M√∫ltiplas Contas por Cliente**

- ‚úÖ **Cliente pode ter v√°rias contas correntes**
- ‚úÖ **Sele√ß√£o autom√°tica ou manual de conta**
- ‚úÖ **Listagem inteligente das contas dispon√≠veis**

## üß™ **Testes Abrangentes**

### **Cobertura de Testes**

```bash
# Executar todos os testes (84 casos)
pytest test_main.py -v

# Testes com cobertura
pytest --cov=main --cov-report=html

# Testes espec√≠ficos por classe
pytest test_main.py::TestPessoaFisica -v
pytest test_main.py::TestContaCorrente -v
pytest test_main.py::TestTransacoes -v
```

### **Categorias de Teste Implementadas**

- ‚úÖ **Testes Unit√°rios**: Cada classe isoladamente
- ‚úÖ **Testes de Integra√ß√£o**: Fluxos completos entre classes
- ‚úÖ **Testes Parametrizados**: M√∫ltiplos cen√°rios automatizados
- ‚úÖ **Testes com Fixtures**: Reutiliza√ß√£o de objetos
- ‚úÖ **Testes de Heran√ßa**: Valida√ß√£o de polimorfismo
- ‚úÖ **Testes de Classes Abstratas**: Implementa√ß√£o correta

## üéØ **Funcionalidades Avan√ßadas**

### **üìä Relat√≥rios Inteligentes**

#### **1. Relat√≥rio por Tipo de Transa√ß√£o**

```python
# Relat√≥rio espec√≠fico
historico.gerar_relatorio("deposito")  # S√≥ dep√≥sitos
historico.gerar_relatorio("saque")     # S√≥ saques
historico.gerar_relatorio()            # Todas as transa√ß√µes
```

#### **2. Transa√ß√µes do Dia**

```python
# Filtra automaticamente por data atual
transacoes_hoje = conta.historico.transacoes_do_dia()
print(f"Transa√ß√µes hoje: {len(transacoes_hoje)}")
```

### **‚ö° Opera√ß√µes Din√¢micas**

#### **1. Sele√ß√£o Inteligente de Conta**

```python
def recuperar_conta_cliente(cliente: Cliente) -> Optional[Conta]:
    if len(cliente.contas) == 1:
        return cliente.contas[0]  # Sele√ß√£o autom√°tica
    else:
        # Lista op√ß√µes para o usu√°rio escolher
        return conta_escolhida
```

#### **2. Valida√ß√µes Robustas**

- ‚úÖ **CPF**: Formato e unicidade
- ‚úÖ **Valores**: Positivos e limites
- ‚úÖ **Datas**: Controle de opera√ß√µes di√°rias
- ‚úÖ **Contas**: Exist√™ncia e saldo

## üèóÔ∏è **Arquitetura Modular**

### **Estrutura de Arquivos**

```
sistema-bancario-v3/
‚îú‚îÄ‚îÄ main.py                        # Sistema principal OOP
‚îú‚îÄ‚îÄ test_main.py                    # Testes para classes
‚îú‚îÄ‚îÄ conftest.py                     # Fixtures para testes
‚îú‚îÄ‚îÄ requirements.txt                # Depend√™ncias
‚îú‚îÄ‚îÄ pytest.ini                     # Configura√ß√£o de testes
‚îú‚îÄ‚îÄ pyproject.toml                  # Configura√ß√£o do projeto
‚îú‚îÄ‚îÄ .python-version                 # Vers√£o Python
‚îú‚îÄ‚îÄ .gitignore                      # Arquivos ignorados
‚îî‚îÄ‚îÄ README.md                       # Esta documenta√ß√£o
```

### **Depend√™ncias e Compatibilidade**

```txt
# requirements.txt
pytest>=7.0.0
pytest-cov>=4.0.0
pytest-mock>=3.10.0
```

## üí° **Exemplos de Uso Avan√ßado**

### **1. Cria√ß√£o Program√°tica**

```python
# Criar cliente e m√∫ltiplas contas
cliente = PessoaFisica("Jo√£o Silva", "01/01/1990", "12345678901", "Rua A, 123")

# Conta corrente principal
conta_principal = ContaCorrente(cliente, limite=1000.0, limite_saques=5)
cliente.adicionar_conta(conta_principal)

# Conta corrente secund√°ria
conta_secundaria = ContaCorrente(cliente, limite=500.0, limite_saques=3)
cliente.adicionar_conta(conta_secundaria)

# Opera√ß√µes usando transa√ß√µes
deposito = Deposito(2000.0)
cliente.realizar_transacao(conta_principal, deposito)

saque = Saque(300.0)
cliente.realizar_transacao(conta_principal, saque)
```

### **2. Relat√≥rios Customizados**

```python
# An√°lise de movimenta√ß√£o
def analisar_conta(conta: ContaCorrente):
    historico = conta.historico

    # Transa√ß√µes de hoje
    hoje = historico.transacoes_do_dia()

    # Por tipo
    depositos = historico.gerar_relatorio("deposito")
    saques = historico.gerar_relatorio("saque")

    # Estat√≠sticas
    total_depositos = sum(t.valor for t in hoje if isinstance(t, Deposito))
    total_saques = sum(t.valor for t in hoje if isinstance(t, Saque))

    return {
        "saldo": conta.saldo,
        "transacoes_hoje": len(hoje),
        "depositos_hoje": total_depositos,
        "saques_hoje": total_saques
    }
```

## üîç **Compara√ß√£o com Vers√£o Anterior**

| Aspecto              | Vers√£o 2.0 (Dicion√°rios) | Vers√£o 3.0 (Classes)      |
| -------------------- | ------------------------ | ------------------------- |
| **Paradigma**        | Procedural               | Orientado a Objetos       |
| **Estrutura**        | Dicion√°rios e listas     | Classes e heran√ßa         |
| **Extensibilidade**  | Limitada                 | Alta (polimorfismo)       |
| **Manutenibilidade** | M√©dia                    | Alta (encapsulamento)     |
| **Testabilidade**    | Boa                      | Excelente (mocking)       |
| **Reutiliza√ß√£o**     | Baixa                    | Alta (heran√ßa/composi√ß√£o) |
| **Valida√ß√µes**       | Manuais                  | Autom√°ticas (m√©todos)     |
| **Relat√≥rios**       | B√°sicos                  | Avan√ßados (filtros)       |

## üö¶ **Regras de Neg√≥cio Implementadas**

### **üë§ Gest√£o de Clientes**

- ‚úÖ **CPF √∫nico** no sistema
- ‚úÖ **M√∫ltiplas contas** por cliente
- ‚úÖ **Dados obrigat√≥rios** validados
- ‚úÖ **Formata√ß√£o autom√°tica** de CPF

### **üè¶ Contas Correntes**

- ‚úÖ **Ag√™ncia fixa**: "0001"
- ‚úÖ **Numera√ß√£o sequencial** autom√°tica
- ‚úÖ **Limites personaliz√°veis** por conta
- ‚úÖ **Hist√≥rico individual** por conta

### **üí∞ Transa√ß√µes**

- ‚úÖ **Limite m√°ximo**: R$ 500,00 por saque (configur√°vel)
- ‚úÖ **Limite di√°rio**: 3 saques por dia (configur√°vel)
- ‚úÖ **Limite geral**: 10 transa√ß√µes por dia por cliente
- ‚úÖ **Precis√£o financeira**: Valores em centavos

### **üìä Relat√≥rios**

- ‚úÖ **Filtros por tipo** de transa√ß√£o
- ‚úÖ **Per√≠odo espec√≠fico** (dia atual)
- ‚úÖ **Estat√≠sticas autom√°ticas**
- ‚úÖ **Formata√ß√£o profissional**

## üèÜ **Benef√≠cios da Arquitetura OOP**

### **1. Manutenibilidade**

- **Responsabilidade √∫nica**: Cada classe tem uma fun√ß√£o espec√≠fica
- **Baixo acoplamento**: Classes independentes e intercambi√°veis
- **Alta coes√£o**: M√©todos relacionados agrupados logicamente

### **2. Extensibilidade**

- **Novos tipos de conta**: Herdar de `Conta`
- **Novas transa√ß√µes**: Implementar `Transacao`
- **Novos clientes**: Herdar de `Cliente`

### **3. Testabilidade**

- **Isolamento**: Cada classe pode ser testada independentemente
- **Mocking**: F√°cil simula√ß√£o de depend√™ncias
- **Fixtures**: Reutiliza√ß√£o de objetos de teste

### **4. Reutiliza√ß√£o**

- **Heran√ßa**: Compartilhamento de c√≥digo comum
- **Composi√ß√£o**: Combina√ß√£o flex√≠vel de funcionalidades
- **Polimorfismo**: Tratamento uniforme de objetos diferentes

## üìà **M√©tricas de Qualidade**

- üß™ **84 testes** passando com 100% de cobertura
- üìù **800+ linhas** de c√≥digo principal
- üéØ **100% tipado** com MyPy strict mode
- üèóÔ∏è **10 classes** principais implementadas
- ‚ö° **8 opera√ß√µes** banc√°rias dispon√≠veis
- üîí **20+ valida√ß√µes** de seguran√ßa ativas

## üîß **Solu√ß√£o de Problemas**

### **Erro MyPy**

Se encontrar erros de tipo, certifique-se de usar Python 3.13.2:

```bash
python --version  # Deve ser 3.13.2
mypy main.py conftest.py test_main.py
```

### **Testes Falhando**

Verifique se todas as depend√™ncias est√£o instaladas:

```bash
pip install -r requirements.txt
pytest -v  # Deve mostrar 84 testes passando
```

### **Problemas de Importa√ß√£o**

Certifique-se de estar no diret√≥rio correto:

```bash
ls -la  # Deve mostrar main.py, test_main.py, conftest.py
```

## üéì **Conceitos de POO Demonstrados**

### **Heran√ßa**

```python
class Cliente:                    # Classe base
    def realizar_transacao(self): pass

class PessoaFisica(Cliente):      # Heran√ßa
    def get_cpf_formatado(self):  # M√©todo espec√≠fico
        return formatted_cpf
```

### **Polimorfismo**

```python
def processar_transacao(transacao: Transacao):
    transacao.registrar(conta)    # Mesmo m√©todo, comportamentos diferentes

# Funciona com Saque, Deposito, ou qualquer Transacao
```

### **Encapsulamento**

```python
class Conta:
    def __init__(self):
        self._saldo_centavos = 0  # Atributo protegido

    @property
    def saldo(self) -> float:     # Acesso controlado
        return self._saldo_centavos / 100
```

### **Abstra√ß√£o**

```python
from abc import ABC, abstractmethod

class Transacao(ABC):             # Classe abstrata
    @abstractmethod
    def registrar(self, conta):   # M√©todo abstrato
        pass
```

## üë®‚Äçüíª **Autor**

Desenvolvido por **@inacio-dev** durante o bootcamp **Santander - Python**.

**Conecte-se:**

- üêô GitHub: [@inacio-dev](https://github.com/inacio-dev)
- üíº LinkedIn: [In√°cio Rodrigues](https://linkedin.com/in/inacio-rodrigues-dev)

---

‚≠ê **Se este projeto foi √∫til, considere dar uma estrela no reposit√≥rio!**

üîÑ **Vers√µes dispon√≠veis:**

- [v1.0](https://github.com/inacio-dev/santander-python-bank/tree/v1) - Vers√£o procedural b√°sica
- [v2.0](https://github.com/inacio-dev/santander-python-bank/tree/v2) - Sistema modularizado
- **v3.0** - Sistema orientado a objetos (atual)
